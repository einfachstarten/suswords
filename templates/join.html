<!DOCTYPE html>
<html lang="de">
<head>
  <meta name="app-version" content="{{ app_version }}">
  <meta name="build-time" content="{{ build_time }}">

  <meta charset="UTF-8">
  <title>SusWords – Beitreten</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600&family=Rubik&display=swap" rel="stylesheet">
  <link rel="icon" type="image/x-icon" href="{{ versioned_url("static/favicon.ico") }}">
  <link rel="stylesheet" href="{{ versioned_url("static/css/join.css") }}">
</head>
<body>
  <img src="{{ versioned_url("static/suswords.png") }}" alt="SusWords Logo" class="logo">

  <div class="container" data-game-id="{{ game_id or '' }}">
    <h1 id="pageTitle">🎮 SusWords beitreten</h1>

    <!-- Game Code Input Section (shown when no game_id) -->
    <div id="gameCodeSection" class="game-code-section" style="display: {{ 'none' if game_id else 'block' }};">
      <p>Gib den Game Code ein, den du erhalten hast:</p>
      <div class="game-code-input-container">
        <input type="text" id="gameCodeInput" placeholder="z.B. A7B9" maxlength="8">
        <button onclick="loadGame()">🔍 Spiel suchen</button>
      </div>
      <div class="divider">
        <span>oder</span>
      </div>
      <p class="hint-text">📱 Du hast einen Link? Einfach direkt öffnen!</p>
    </div>

    <!-- Join Game Section (shown when game_id exists) -->
    <div id="joinSection" class="join-section" style="display: {{ 'block' if game_id else 'none' }};">
      <div class="game-id">Spiel-ID: <strong id="displayGameId">{{ game_id or '' }}</strong></div>
      <input type="text" id="playerName" placeholder="Dein Name">
      <button onclick="joinGame()">🚀 Beitreten</button>
      <button id="muteBtn" class="mute-btn" onclick="toggleMute()">🔊 Musik aus</button>
      <div id="waitingMessage" style="display:none;">🕒 Warte auf Spielstart durch den Spielleiter...</div>
    </div>
  </div>

  <audio id="lobbyMusic" src="{{ versioned_url("static/suswords.mp3") }}" loop autoplay></audio>

  <script src="{{ versioned_url("static/js/join.js") }}"></script>
</body>
</html>